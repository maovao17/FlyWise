<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>FlyWise — Smart Flight Search</title>

  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js" defer></script>

  <link rel="stylesheet" href="./css/style.css" />

  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

  <script src="./js/script.js" defer></script>
</head>
<body>
  <header class="site-header">
    <div class="brand">
      <div class="logo">
        <svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M2 12l20-8-8 20-2-8-10-4z"></path></svg>
      </div>
      <div>
        <div class="brand-title">FlyWise</div>
        <div class="brand-tag">Smart choices for flying</div>
      </div>
    </div>
    <div class="preferences">
      <div class="input-group">
        <label for="pref-class">Class</label>
        <select id="pref-class" class="pref-select">
          <option value="Economy">Economy</option>
          <option value="Business">Business</option>
          <option value="First Class">First Class</option>
          <option value="Premium Economy">Premium Economy</option>
        </select>
      </div>
      <div class="input-group">
        <label for="pref-currency">Currency</label>
        <select id="pref-currency" class="pref-select">
          <option value="INR">₹ INR</option>
          <option value="USD">$ USD</option>
        </select>
      </div>
    </div>
  </header>

  <main>
    <section class="search-section glass-card" aria-labelledby="search-title">
      <h2 id="search-title" class="hidden">Flight Search</h2>
      <form class="search-form" onsubmit="return false;">
        
        <div class="input-group">
          <label for="from-input">From</label>
          <div class="input-field">
            <svg aria-hidden="true" viewBox="0 0 24 24"><path fill="currentColor" d="M3 21v-2l8-5V7c0-1.1.9-2 2-2s2 .9 2 2v7l8 5v-2l-8-5V7c0-.55-.45-1-1-1s-1 .45-1 1v7L3 19v2z"></path></svg>
            <input type="text" id="from-input" placeholder="Origin (e.g., DEL)" autocomplete="off">
          </div>
          <ul class="suggestions" id="from-sug"></ul>
        </div>
        
        <div class="input-group">
          <label for="to-input">To</label>
          <div class="input-field">
            <svg aria-hidden="true" viewBox="0 0 24 24"><path fill="currentColor" d="M21 16v-2l-8-5V3.5c0-.83-.67-1.5-1.5-1.5S10 2.67 10 3.5V9l-8 5v2l8-5v5l-2 1.5V21l3.5-1 3.5 1v-1.5L13 16v-5l8 5z"></path></svg>
            <input type="text" id="to-input" placeholder="Destination (e.g., BOM)" autocomplete="off">
          </div>
          <ul class="suggestions" id="to-sug"></ul>
        </div>

        <div class="input-group">
          <label for="date-input">Departure Date</label>
          <div class="input-field">
            <svg aria-hidden="true" viewBox="0 0 24 24"><path fill="currentColor" d="M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"></path></svg>
            <input type="date" id="date-input">
          </div>
        </div>
        <button class="search-button" id="find-button">Find Flights</button>
        
        <div class="priority-controls" role="radiogroup" aria-labelledby="priority-label">
          <span id="priority-label">Sort by:</span>
          <input type="radio" name="priority" value="cheapest" id="pri-cheap" checked><label for="pri-cheap">Cheapest</label>
          <input type="radio" name="priority" value="shortest" id="pri-short"><label for="pri-short">Shortest</label>
          <input type="radio" name="priority" value="eco" id="pri-eco"><label for="pri-eco">Eco-Friendly (kg CO2)</label>
        </div>
        
        <div class="input-group">
          <label for="comfort-filter">Min. Airport Comfort</label>
          <div class="input-field">
            <select id="comfort-filter" class="pref-select" style="padding: 0; border: 0;">
              <option value="0">Any Comfort Level</option>
              <option value="3">3.0+ Stars</option>
              <option value="4">4.0+ Stars</option>
              <option value="4.5">4.5+ Stars</option>
            </select>
          </div>
        </div>
        
      </form>
    </section>

    <section class="saved-flights" aria-labelledby="saved-title">
        <h2 id="saved-title">My Saved Flights</h2>
        <div id="saved-flights-container" class="results-grid">
            <p class="loader-text" id="no-saved-flights">No saved flights yet. Click the 'Save' button on a flight card!</p>
        </div>
    </section>
    <section class="insights" aria-labelledby="insights-title">
      <div class="insights-header">
        <h2 id="insights-title">Insights</h2>
        <div class="insights-sub">Top searched routes</div>
      </div>
      <div class="chart-wrap">
        <canvas id="busiestRoutesChart" role="img" aria-label="Busiest routes chart"></canvas>
      </div>
    </section>

    <section id="results-section" aria-live="polite">
      <div id="loading-indicator" class="loader hidden" role="status" aria-hidden="true">
        <div class="loader-plane"></div>
        <div class="loader-text">Searching for best routes...</div>
      </div>
      <div id="results-container" class="results-grid" aria-label="Search results"></div>
    </section>
  </main>

  <div id="details-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div class="modal-content" role="document">
      <button class="modal-close" aria-label="Close">&times;</button>
      <h3 id="modal-title">Flight details</h3>
      <div id="modal-body"></div>
    </div>
  </div>

  <div id="toast-notify" class="toast" role="alert"></div>

</body>
</html>